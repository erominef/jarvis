```mermaid
graph TD;   
    User -->|"message"| Bot
    Bot -->|"text + history"| Agent
    Agent --> Classify
    Classify -->|"tier + needsTools"| Router
    Router -->|"fast tasks"| PC
    Router -->|"deep reasoning"| Xeon
    Agent <-->|"tool calls"| ToolReg
    ToolReg --> Tools
    Tools --> WebFetch
    Tools --> Shell
    Tools --> Memory
    Tools --> MCP
    MCP -->|"SSE / JSON-RPC"| KB
    PC -->|"streamed tokens"| Agent
    Xeon -->|"streamed tokens"| Agent
    Agent -->|"response"| Bot
    Bot -->|"reply"| User

    style PC fill:#1e3a5f,color:#fff
    style Xeon fill:#3a1e5f,color:#fff
    style KB fill:#1e5f3a,color:#fff
    style User fill:#5f3a1e,color:#fff
```
